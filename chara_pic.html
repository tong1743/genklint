<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" href="picture/icon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>角色圖片設定</title>
    <style>
        body.dark-mode #navMenuBtn {
            color: white;
            text-shadow: #181c22 1px 1px 2px;

        }

        body.dark-mode .side-nav {
            background: #232834;
            box-shadow: -2px 0 8px rgba(0, 0, 0, 0.4);
        }

        body.dark-mode .side-nav a {
            color: #d3d7de;
        }

        body.dark-mode .side-nav a.active {
            background: #7ecfff;
            color: #232834;
            font-weight: bold;
        }

        body.dark-mode .side-nav a:hover {
            background: #2e6b97;
            color: #fff;
        }




        /*晚間模式*/
        /*共通內容*/
        body.dark-mode {
            background: #181c22;
            color: #d3d7de;
        }

        body.dark-mode h1,
        body.dark-mode h2,
        body.dark-mode h3 {
            color: #7ecfff;
        }

        body.dark-mode .main-content {
            background: #181c22;
        }

        body.dark-mode .banner {
            color: #fff;
        }

        body.dark-mode .banner::before {
            background-color: rgba(0, 0, 0, 0.7);
        }

        body.dark-mode hr {
            border-color: #3a4a5a;
        }

        body.dark-mode #backToTopBtn::after {
            background: #232834;
            color: #7ecfff;
            border-color: #7ecfff;
        }

        body.dark-mode #toggleDarkModeBtn {
            background: #2e6b97;
        }

        /* 角色圖片頁 dark-mode 進階配色 */
        body.dark-mode .character-section {
            background: #232834;
            border-color: #3a4a5a;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.18);
        }

        body.dark-mode .character-section h3 {
            color: #7ecfff;
            border-left-color: #7ecfff;
        }

        body.dark-mode .character-description {
            background: #181c22;
            border-left-color: #7ecfff;
        }

        body.dark-mode .character-description h4 {
            color: #7ecfff;
        }

        body.dark-mode .character-description p {
            color: #d3d7de;
        }

        body.dark-mode .outfit-indicator {
            background: #232834;
            color: #7ecfff;
            border-color: #7ecfff;
        }

        body.dark-mode .image-placeholder {
            background: linear-gradient(45deg, #232834 25%, transparent 25%),
                linear-gradient(-45deg, #232834 25%, transparent 25%),
                linear-gradient(45deg, transparent 75%, #232834 75%),
                linear-gradient(-45deg, transparent 75%, #232834 75%);
            color: #7ecfff;
            border-color: #3a4a5a;
        }

        body.dark-mode .image-placeholder:hover {
            background-color: #2e6b97;
            border-color: #7ecfff;
        }

        body.dark-mode .image-item figcaption {
            color: white;
        }

        body.dark-mode .container {
            background: #181c22;
        }



        body.dark-mode .modal {
            background-color: rgba(24, 28, 34, 0.98);
        }

        body.dark-mode .modal-content {
            background: #232834;
        }

        body.dark-mode .modal-caption {
            color: #7ecfff;
        }

        body.dark-mode .outfit-nav button {
            background: linear-gradient(135deg, #2e6b97, #232834);
            color: #fff;
        }

        body.dark-mode .outfit-nav button:disabled {
            background: #3a4a5a;
            color: #888;
        }

        body.dark-mode .outfit-nav button:hover:not(:disabled) {
            background: linear-gradient(135deg, #7ecfff, #2e6b97);
            color: #232834;
        }



        /*共通內容*/
        /* 基本重置和布局 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
        }

        hr {
            margin: 1rem;
        }

        h1 {
            color: #84B1ED;
        }

        li {
            margin-left: 1em;
        }

        .spolier img {
            filter: blur(10px);
        }

        .spolier:hover img {
            filter: none;
        }

        .spolier figcaption {
            color: red !important;
        }

        .main-content {
            margin-left: auto;
            margin-right: auto;
            max-width: 900px;
            padding: 20px 32px;
            min-height: 100vh;
        }

        footer {
            text-align: center;
            padding: 10px 0;
            font-size: 0.9em;
        }

        /* 背景橫幅樣式 */
        .banner {
            background-image: url('picture/banner.png');
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
            width: 100%;
            height: 400px;
            aspect-ratio: 16/10;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            position: relative;
        }

        .banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.4);
        }

        .banner-content {
            position: relative;
            z-index: 1;
            max-width: 800px;
            padding: 0 20px;
        }

        .banner h1 {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .banner .banner-content h1 {
            color: white;
        }

        .banner p {
            font-size: 1.2em;
        }

        /* 讓 navMenuBtn 可被 JS 隱藏 */
        #navMenuBtn.hidden {
            display: none !important;
        }

        /* 側邊導覽列樣式 */
        .side-nav {
            position: fixed;
            top: 0;
            left: -260px;
            width: 260px;
            height: 100%;
            background: #2e6b97;
            box-shadow: -2px 0 8px rgba(0, 0, 0, 0.15);
            z-index: 3001;
            display: flex;
            flex-direction: column;
            padding-top: 60px;
            transition: left 0.3s cubic-bezier(.4, 0, .2, 1);
        }

        .side-nav.open {
            left: 0;
        }

        .side-nav a {
            color: #fff;
            padding: 18px 32px;
            text-decoration: none;
            font-size: 1.2em;
            transition: background 0.2s;
        }

        .side-nav a.active {
            background: #7ecfff;
            color: #2e6b97;
            font-weight: bold;
        }

        .side-nav a:hover {
            background: #3a4a5a;
            color: #fff;
        }

        /* 側邊欄開啟時隱藏選單按鈕 */
        #navMenuBtn {
            display: flex;
            position: fixed;
            align-items: center;
            justify-content: center;
            background: none;
            width: 48px;
            height: 48px;
            top: 16px;
            left: 16px;
            z-index: 3100;
            font-size: 2em;
            color: black;
            text-shadow: #ebebeb 1px 1px 2px;

            border: none;
            border-radius: 8px;
            padding: 6px 16px;
            cursor: pointer;
        }


        #navMenuBtn .menu-icon,
        #navMenuBtn .close-icon {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            display: block;
            width: 1em;
            height: 1em;
            font-size: 2em;
            line-height: 1;
            transition: opacity 0.3s, transform 0.3s;
            pointer-events: none;
        }

        #navMenuBtn .close-icon {
            opacity: 0;
            transform: translate(-50%, -50%) rotate(-90deg) scale(0.7);
        }

        .side-nav.open #navMenuBtn .menu-icon {
            opacity: 0;
            transform: translate(-50%, -50%) rotate(90deg) scale(0.7);
        }

        .side-nav.open #navMenuBtn .close-icon {
            opacity: 1;
            transform: translate(-50%, -50%) rotate(0deg) scale(1);
        }

        /* 讓 navMenuBtn 在側邊欄開啟時顯示（覆蓋原本 display:none） */
        .side-nav.open #navMenuBtn {
            display: flex !important;
        }

        /*黑暗模式切換按鈕*/
        #toggleDarkModeBtn {
            position: absolute;
            bottom: 12px;
            right: 50%;
            transform: translateX(50%);
            z-index: 3000;
            padding: 7px 18px;
            font-size: 1em;
            border-radius: 8px;
            border: none;
            background: #232834;
            color: #fff;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        /* 遮罩 */
        .side-nav-mask {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.3);
            z-index: 3000;
        }

        .side-nav.open~.side-nav-mask {
            display: block;
        }

        .page-section {
            margin-bottom: 40px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .submenu {
            display: none;

        }

        .submenu-group.open>.submenu {
            display: flex;
            flex-direction: column;
            position: absolute;
            width: 100%;
            background-color: #3498db;

        }

        .submenu-toggle {
            display: block;
            cursor: pointer;
        }

        /* 讓回到頂端按鈕可被 JS 隱藏 */
        #backToTopBtn.hidden {
            display: none !important;
        }

        /*回到頂端按鈕*/
        #backToTopBtn {
            position: fixed;
            right: 22px;
            bottom: 32px;
            width: 104px;
            height: 78px;
            cursor: pointer;
            z-index: 2000;
            background: none;
            border: none;
            outline: none;
            padding: 4px;
            transition: opacity 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
        }

        #backToTopBtn.visible {
            opacity: 1;
            pointer-events: auto;
        }

        #backToTopBtn::after {
            content: "回到頂端⇧";
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            bottom: -26px;
            background: rgba(0, 0, 0, 0.4);
            color: white;
            border: white 1px solid;
            font-size: 12px;
            padding: 2px 9px;
            border-radius: 14px;
            text-align: center;
            pointer-events: auto;
            white-space: nowrap;
            opacity: 1;
        }

        #backToTopBtn img {
            width: 100%;
            height: 100%;
            display: block;
            pointer-events: none;
        }

        @media screen and (max-width: 768px) {
            #backToTopBtn {
                position: fixed;
                right: 12px;
                bottom: 32px;
                width: 52px;
                height: 39px;
                cursor: pointer;
                z-index: 2000;
                background: none;
                border: none;
                outline: none;
                padding: 4px;
                transition: opacity 0.3s;
                display: flex;
                align-items: center;
                justify-content: center;
                opacity: 0;
                pointer-events: none;
            }

            #backToTopBtn::after {

                left: 50%;
                transform: translateX(-50%);
                bottom: -20px;
                background: rgba(0, 0, 0, 0.4);
                color: white;
                border: white 1px solid;
                font-size: 9px;
                padding: 2px 9px;
                border-radius: 14px;
            }

            #backToTopBtn img {
                content: url(picture/backtotop_small.gif);
            }

            .banner h1 {
                font-size: 2em;
            }

            .banner p {
                font-size: 1em;
            }

            .main-content {
                max-width: 100%;
                padding-left: 20px;
                padding-right: 20px;
            }

        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }


        .character-gallery {
            display: flex;
            flex-direction: column;
            gap: 40px;
        }

        .character-section {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            border: 1px solid #e9ecef;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
        }

        .character-section:hover {
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
        }

        .character-section h3 {
            color: #2c3e50;
            font-size: 1.6em;
            margin-bottom: 20px;
            border-left: 5px solid #3498db;
            padding-left: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .character-section:first-child h3:before {
            content: url(picture/asogi_mark.png);
            height: 30px;
            width: 30px;
        }

        .character-section:nth-child(2) h3::before,
        .character-section:nth-child(3) h3::before {
            content: url(picture/vanzieks_mark.png);
            width: 34px;
            height: 32px;
        }

        /* 服裝切換控制區域 */
        .outfit-controls {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 10px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .outfit-nav {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .outfit-nav button {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(52, 152, 219, 0.3);
        }

        .outfit-nav button:hover:not(:disabled) {
            background: linear-gradient(135deg, #2980b9, #1f618d);
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.4);
        }

        .outfit-nav button:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .outfit-indicator {
            background: #f8f9fa;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            color: #3498db;
            font-size: 0.95em;
            border: 2px solid #e3f2fd;
        }

        .character-description {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            border-left: 4px solid #17a2b8;
        }

        .character-description h4 {
            color: #17a2b8;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .character-description p {
            color: #6c757d;
            font-size: 0.95em;
            line-height: 1.5;
        }

        .character-images {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: flex-start;
            align-items: flex-start;
            padding: 10px 0;
            position: relative;
        }

        /* 關鍵修改：隱藏的圖片完全不佔用空間 */
        .image-item {
            position: relative;
            /* 固定寬高 */
            width: 200px;
            height: 250px;
            flex: 0 0 auto;
            opacity: 1;
            transition: opacity 0.3s ease;
            /* 切掉超出內容 */
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        /* 隱藏的圖片完全移除出布局 */
        .image-item.hidden {
            display: none !important;
            opacity: 0;
            visibility: hidden;
            height: 0;
            width: 0;
            margin: 0;
            padding: 0;
            overflow: hidden;
            pointer-events: none;
        }

        /* 固定尺寸的圖片容器 */
        .image-item img,
        .image-item .image-placeholder {
            /* 填滿整個容器 */
            width: 100%;
            height: 100%;
            object-fit: cover;
            /* 填滿容器，切掉超出部分 */
            object-position: top;
            /* 從中心開始切掉 */
            border-radius: 10px;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 3px solid transparent;
            display: block;
            /* 切掉超出邊界 */
            position: absolute;
            top: 0;
            left: 0;
        }

        .image-item img:hover,
        .image-item .image-placeholder:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.2);
            border-color: #3498db;
        }

        .image-item figcaption {
            text-align: center;
            font-size: 0.85em;
            color: white;
            text-shadow: #666 0.5px 0.5px 0,
                #666 -0.5px -0.5px 0,
                #666 0.5px -0.5px 0,
                #666 -0.5px 0.5px 0;
            top: 80%;
            padding: 0 5px;
            font-weight: 500;
            line-height: 1.3;
            /* 固定高度的標題區域 */
            height: 2.5em;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            pointer-events: none;
        }

        /* 隱藏時的圖片說明文字也不顯示 */
        .image-item.hidden figcaption {
            display: none;
        }

        .image-placeholder {
            background: linear-gradient(45deg, #f0f0f0 25%, transparent 25%),
                linear-gradient(-45deg, #f0f0f0 25%, transparent 25%),
                linear-gradient(45deg, transparent 75%, #f0f0f0 75%),
                linear-gradient(-45deg, transparent 75%, #f0f0f0 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
            border-radius: 10px;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-size: 0.9em;
            text-align: center;
            padding: 60px 20px;
            border: 2px dashed #dee2e6;
            cursor: pointer;
            transition: all 0.3s ease;
            top: 0;
            left: 0;
            box-sizing: border-box;
        }

        .image-placeholder:hover {
            background-color: #e9ecef;
            border-color: #3498db;
            transform: scale(1.02);
        }



        /* 服裝標籤 */
        .outfit-tag {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #e74c3c;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: bold;
            z-index: 10;
        }

        /* 修正後的模態視窗樣式 - 固定容器大小 */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            animation: fadeIn 0.3s ease;
            overflow: auto;
            padding: 0;
            margin: 0;
        }

        .modal-content {
            position: relative;
            margin: auto;
            display: flex;
            justify-content: center;
            align-items: center;
            /* 固定容器大小，不隨內容變化 */
            width: 90vw;
            height: 90vh;
            max-width: 1200px;
            max-height: 800px;
            min-height: 400px;
            padding: 20px;
            box-sizing: border-box;
            animation: zoomIn 0.3s ease;
        }

        /* 固定大小的圖片檢視區域 */
        .modal-viewport {
            position: relative;
            width: 100%;
            height: 100%;
            background: #111;
            border-radius: 8px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            flex: 1;
        }

        /* 圖片容器 - 固定在視窗內 */
        .modal-image-container.prepare {
            opacity: 0 !important;
        }

        .modal-image-container {
            opacity: 1;
            position: relative;
            max-width: 100%;
            max-height: 100%;
            width: auto;
            height: auto;
            cursor: grab;
            transition: transform 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-image-container:active {
            cursor: grabbing;
        }

        .modal-image-container img {
            /* 初始狀態：長邊適配容器 */
            max-width: 100%;
            max-height: 100%;
            width: auto;
            height: auto;
            border-radius: 8px;
            object-fit: contain;
            display: block;
            transform-origin: center center;
        }

        /* 縮放狀態下的圖片容器 */
        .modal-image-container.zoomed {
            max-width: none;
            max-height: none;
        }

        .modal-image-container.zoomed img {
            cursor: move;
            max-width: none;
            max-height: none;
        }

        /* 佔位符樣式 */
        .modal-placeholder {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(45deg, #f0f0f0 25%, transparent 25%),
                linear-gradient(-45deg, #f0f0f0 25%, transparent 25%),
                linear-gradient(45deg, transparent 75%, #f0f0f0 75%),
                linear-gradient(-45deg, transparent 75%, #f0f0f0 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
            border-radius: 10px;
            padding: 60px 40px;
            border: 2px dashed #666;
            color: #999;
            font-size: 1.2em;
            text-align: center;
            min-width: 200px;
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 10px;
        }


        /* 下載按鈕樣式 */

        .buttons {
            display: flex;
            flex-direction: column;
            position: fixed;
            top: 15px;
            right: 15px;
            gap: 10px;
            z-index: 1001;
        }

        .download-controls {
            position: relative;
            display: flex;
            z-index: 1001;
        }

        .download-btn {
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: white;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .download-btn:hover:not(:disabled) {
            background: rgba(0, 0, 0, 0.8);
            transform: scale(1.1);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .download-btn:active {
            transform: scale(0.95);
        }

        .download-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
            opacity: 0.5;
        }

        .download-btn .download-icon {
            background: white;
            width: 30px;
            height: 30px;
            mask: url(icon/download-icon.svg) no-repeat center center;
            -webkit-mask: url(icon/download-icon.svg) no-repeat center center;
            mask-size: contain;
            -webkit-mask-size: contain;
        }

        /* 控制按鈕定位調整 */
        .close {
            position: relative;

            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 1001;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .close:hover,
        .close:focus {
            color: #fff;
            background: rgba(0, 0, 0, 0.8);
            transform: scale(1.1);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .modal-prev,
        .modal-next {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(0, 0, 0, 0.6);
            color: white;
            border: none;
            padding: 20px 15px;
            cursor: pointer;
            font-weight: bold;
            font-size: 24px;
            transition: all 0.3s ease;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1001;
            backdrop-filter: blur(10px);
        }

        .modal-caption {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #ccc;
            padding: 15px 20px;
            font-size: 1.2em;
            font-weight: 500;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 25px;
            max-width: 90%;
            text-align: center;
            backdrop-filter: blur(10px);
            z-index: 1001;
        }

        .modal-next {
            right: 20px;
        }

        .modal-prev {
            left: 20px;
        }

        .modal-prev:hover,
        .modal-next:hover {
            background-color: rgba(0, 0, 0, 0.9);
            transform: translateY(-50%) scale(1.1);
            color: #fff;
        }

        .modal-prev:disabled,
        .modal-next:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            transform: translateY(-50%) scale(1);
        }

        .zoom-controls {
            position: fixed;
            right: 100px;
            top: 20px;
            z-index: 1001;
        }

        .zoom-info {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #ccc;
            font-size: 0.9em;
            background: rgba(0, 0, 0, 0.6);
            padding: 8px 12px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            z-index: 1001;
            pointer-events: none;
        }

        .zoom-btn {
            background: rgba(0, 0, 0, 0.6);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .zoom-btn:hover {
            background: rgba(0, 0, 0, 0.8);
            transform: scale(1.1);
        }



        /* 動畫效果 */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes zoomIn {
            from {
                transform: scale(0.7);
                opacity: 0;
            }

            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* 響應式設計 */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }


            .character-section {
                padding: 20px;
            }

            .character-section h3 {
                font-size: 1.4em;
                flex-wrap: wrap;
            }

            .image-item {
                width: 160px;
                height: 200px;
            }

            .image-item figcaption {
                font-size: 0.8em;
                height: 2.2em;
            }

            .outfit-nav button {
                width: 35px;
                height: 35px;
                font-size: 16px;
            }

            .close {
                font-size: 30px;
                width: 40px;
                height: 40px;
            }

            .modal-prev,
            .modal-next {
                width: 50px;
                height: 50px;
                font-size: 20px;
                padding: 15px;
            }

            .modal-prev {
                left: 10px;
            }

            .modal-next {
                right: 10px;
            }

            .zoom-controls {
                right: 70px;
                top: 15px;
            }

            .zoom-btn {
                width: 35px;
                height: 35px;
                font-size: 14px;
            }

            .modal-caption {
                bottom: 15px;
                font-size: 1em;
                padding: 10px 15px;
                max-width: 95%;
            }

            .modal-image-container img {
                max-height: 70vh;
            }
        }

        @media (max-width: 480px) {

            .character-images {
                gap: 12px;
                justify-content: center;
            }

            .image-item {
                max-width: 140px;
            }

            .character-section h3 {
                font-size: 1.3em;
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }

            .outfit-controls {
                flex-direction: column;
                gap: 10px;
                align-items: stretch;
            }

            .outfit-nav {
                justify-content: center;
            }

            .outfit-indicator {
                text-align: center;
            }

            .modal-prev,
            .modal-next {
                width: 45px;
                height: 45px;
                font-size: 18px;
            }

            .zoom-controls {
                right: 60px;
                flex-direction: row;
                gap: 5px;
            }

            .zoom-btn {
                width: 30px;
                height: 30px;
            }

            .zoom-info {
                display: none;
            }
        }



        /* 響應式調整 */
        @media (max-width: 768px) {


            .download-btn {
                width: 40px;
                height: 40px;
            }

            .download-btn .download-icon {
                width: 25px;
                height: 25px;
            }
        }

        @media (max-width: 480px) {


            .download-btn {
                width: 40px;
                height: 40px;
            }
        }

        /* 下載提示樣式 */
        .download-tooltip {
            position: fixed;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1002;
            backdrop-filter: blur(10px);
        }

        .download-tooltip.show {
            opacity: 1;
        }
    </style>
</head>

<body>
    <!--為什麼要偷看我的屎山代碼-->
    <!-- 新導覽列按鈕與遮罩 -->
    <nav id="sideNav" class="side-nav">
        <button id="navMenuBtn" aria-label="開啟選單">
            <span class="menu-icon">☰</span>
            <span class="close-icon">×</span>
        </button>
        <!-- 側邊導覽列 -->
        <a href="index.html">首頁</a>
        <a href="chara_pic.html" class="active submenu-toggle">圖片設定</a>
        <a href="chara_setting.html">文字設定</a>
        <a href="acknowledgement.html">標註/鳴謝</a>
        <a href="report.html">問題回報</a>
        <!-- 晚間模式切換按鈕 -->
        <button id="toggleDarkModeBtn">☽ 晚間模式</button>
    </nav>
    <div class="side-nav-mask"></div>

    <!-- 背景橫幅 -->
    <div class="banner">
        <div class="banner-content">
            <h1>圖片設定</h1>
        </div>
    </div>

    <!-- 主要內容 -->
    <div class="main-content">
        <h2>【預警】</h2>
        <p>本網頁的圖片如無標註，皆為出自Capcom的官方資料。<br>娃娃圖片都只是佔位符不用太在意。<br>家紋像素繪師：米卡</p>
        <div class="container">


            <main class="character-gallery">
                <section class="character-section" data-character="genshin">
                    <h3>亞雙義玄真</h3>

                    <div class="outfit-controls">
                        <div class="outfit-nav">
                            <button class="outfit-prev" onclick="changeOutfit('genshin', -1)">‹</button>
                            <div class="outfit-indicator" id="outfit-indicator-genshin">日常服</div>
                            <button class="outfit-next" onclick="changeOutfit('genshin', 1)">›</button>
                        </div>
                    </div>

                    <div class="character-description">
                        <h4>角色特徵</h4>
                        <ul>
                            <li>33歲，來自日本的蘇格蘭場刑警</li>
                            <li>身高185，身材偏瘦</li>
                            <li>表情：平常都是嚴肅樣，即使笑也是嘴角上移2px</li>
                            <li>左手無名指戴著戒指，髮帶即使沒有風也不會垂下</li>
                    </div>

                    <div class="character-images" id="genshin-images">
                        <!-- 日常服 (預設顯示) -->
                        <figure class="image-item" data-outfit="daily" data-slide="1">
                            <img src="webp/Genshin_Full_Body.webp" data-webp-src="webp/Genshin_Full_Body.webp"
                                data-original-src="picture/Genshin_Full_Body.png alt="正面全身立繪" data-caption="正面全身立繪"
                                loading="lazy">
                            <figcaption>正面全身立繪</figcaption>
                        </figure>

                        <figure class="image-item" data-outfit="daily" data-slide="2">
                            <img src="webp/GenshinArtbook.webp" data-webp-src="webp/GenshinArtbook.webp"
                                data-original-src="picture/GenshinArtbook.png" alt="正面+側面" data-caption="正面+側面"
                                loading="lazy">
                            <figcaption>正面+側面</figcaption>
                        </figure>

                        <figure class="image-item" data-outfit="daily" data-slide="3">
                            <img src="webp/karuma.webp" data-webp-src="webp/karuma.webp"
                                data-original-src="picture/karuma.png" alt="狩魔刀細節" data-caption="狩魔刀細節" loading="lazy">
                            <figcaption>狩魔刀細節</figcaption>
                        </figure>

                        <figure class="image-item" data-outfit="daily" data-slide="4">
                            <img src="webp/ring.webp" data-webp-src="webp/ring.webp"
                                data-original-src="picture/ring.png" alt="戒指細節" data-caption="戒指細節" loading="lazy">
                            <figcaption>戒指細節</figcaption>
                        </figure>

                        <figure class="image-item" data-outfit="daily" data-slide="5">
                            <img src="webp/genshin_artbook_cover.webp" data-webp-src="webp/genshin_artbook_cover.webp"
                                data-original-src="picture/genshin_artbook_cover.jpg" alt="會笑的玄真" data-caption="會笑的玄真"
                                loading="lazy">
                            <figcaption>會笑的玄真</figcaption>
                        </figure>

                        <figure class="image-item" data-outfit="daily" data-slide="6">
                            <img src="webp/siu_nicola_duel.webp" data-webp-src="webp/siu_nicola_duel.webp"
                                data-original-src="picture/siu_nicola_duel.png" alt="決鬥"
                                data-caption="身材參考 繪師：Siu Nicola" loading="lazy">
                            <figcaption>身材參考<br>繪師：Siu Nicola</figcaption>
                        </figure>

                        <!-- Paro -->
                        <figure class="image-item hidden" data-outfit="paro" data-slide="7">
                            <img src="webp/siu_nicola_genshin.webp" data-webp-src="webp/siu_nicola_genshin.webp"
                                data-original-src="picture/siu_nicola_genshin.png" alt="蛇妖"
                                data-caption="蛇妖 繪師：Siu Nicola" loading="lazy">
                            <figcaption>蛇妖<br>繪師：Siu Nicola</figcaption>
                        </figure>

                        <figure class="image-item hidden" data-outfit="paro" data-slide="8">
                            <img src="webp/snake.webp" data-webp-src="webp/snake.webp"
                                data-original-src="picture/snake.png" alt="蛇" data-caption="小蛇 繪師：春日喫茶" loading="lazy">
                            <figcaption>小蛇<br>繪師：春日喫茶</figcaption>
                        </figure>

                        <figure class="image-item hidden" data-outfit="paro" data-slide="9">
                            <img src="webp/duel_genshin.webp" data-webp-src="webp/duel_genshin.webp"
                                data-original-src="picture/duel_genshin.png" alt="決鬥者" data-caption="決鬥者 繪師：淵夢"
                                loading="lazy">
                            <figcaption>決鬥者<br>繪師：淵夢</figcaption>
                        </figure>

                        <figure class="image-item hidden" data-outfit="paro" data-slide="10">
                            <img src="webp/magical_genshin.webp" data-webp-src="webp/magical_genshin.webp"
                                data-original-src="picture/magical_genshin.png" alt="魔法少女" data-caption="魔法少女 繪師：淵夢"
                                loading="lazy">
                            <div class="outfit-tag">繪製前請先詢問</div>
                            <figcaption>魔法少女<br>繪師：淵夢</figcaption>
                        </figure>

                        <figure class="image-item hidden" data-outfit="paro" data-slide="11">
                            <img src="webp/genshin_kimono.webp" data-webp-src="webp/genshin_kimono.webp"
                                data-original-src="picture/genshin_kimono.jpg" alt="placeholder" data-caption="旁邊的是他兒子"
                                loading="lazy">
                            <figcaption>好想看他們穿和服</figcaption>
                        </figure>

                        <!-- 其他 -->
                        <figure class="image-item hidden spolier" data-outfit="other" data-slide="12">
                            <img src="webp/professor.webp" data-webp-src="webp/professor.webp"
                                data-original-src="picture/professor.png" alt="教授" data-caption="教授" loading="lazy">
                            <figcaption>劇透注意</figcaption>
                        </figure>

                        <figure class="image-item hidden" data-outfit="other" data-slide="13">
                            <img src="webp/cg_genbarok.webp" data-webp-src="webp/cg_genbarok.webp"
                                data-original-src="picture/cg_genbarok.png" alt="玄真與巴洛克" data-caption="玄真與巴洛克"
                                loading="lazy">
                            <figcaption>玄真與巴洛克</figcaption>
                        </figure>
                    </div>
                </section>

                    <section class="character-section" data-character="klint">
                        <h3>克里姆特·班吉克斯</h3>

                        <div class="outfit-controls">
                            <div class="outfit-nav">
                                <button class="outfit-prev" onclick="changeOutfit('klint', -1)">‹</button>
                                <div class="outfit-indicator" id="outfit-indicator-klint">日常服</div>
                                <button class="outfit-next" onclick="changeOutfit('klint', 1)">›</button>
                            </div>
                        </div>

                        <div class="character-description">
                            <h4>角色特徵</h4>
                            <ul>
                                <li>33歲，大英帝國的首席檢察官</li>
                                <li>身高192，身材偏壯，有明顯肌肉</li>
                                <li>表情：平常比較認真，跟朋友相處時會笑得比較多</li>
                                <li>左胸口掛著檢察官徽章，手戴著手套</li>
                            </ul>
                        </div>

                        <div class="character-images" id="klint-images">
                            <!-- 日常服 (預設顯示) -->
                            <figure class="image-item" data-outfit="daily" data-slide="14">
                                <img src="webp/Klint_Full_Body.webp" data-webp-src="webp/Klint_Full_Body.webp"
                                    data-original-src="picture/Klint_Full_Body.png" alt="正面全身立繪" data-caption="正面全身立繪"
                                    loading="lazy">
                                <figcaption>正面全身立繪</figcaption>
                            </figure>

                            <figure class="image-item" data-outfit="daily" data-slide="15">
                                <img src="webp/Klint_Artbook.webp" data-webp-src="webp/Klint_Artbook.webp"
                                    data-original-src="picture/Klint_Artbook.jpg" alt="正面+大頭" data-caption="正面+大頭"
                                    loading="lazy">
                                <figcaption>正面+大頭</figcaption>
                            </figure>

                            <figure class="image-item" data-outfit="daily" data-slide="16">
                                <img src="webp/klint_accessories.webp" data-webp-src="webp/klint_accessories.webp"
                                    data-original-src="picture/klint_accessories.png" alt="配件細節" data-caption="配件細節"
                                    loading="lazy">
                                <figcaption>配件細節</figcaption>
                            </figure>

                            <figure class="image-item" data-outfit="daily" data-slide="17">
                                <img src="webp/young_klint.webp" data-webp-src="webp/young_klint.webp"
                                    data-original-src="picture/young_klint.jpg" alt="年輕克里姆特和小巴洛克"
                                    data-caption="年輕克里姆特和小巴洛克" loading="lazy">
                                <figcaption>年輕克里姆特和小巴洛克</figcaption>
                            </figure>

                            <figure class="image-item" data-outfit="daily" data-slide="18">
                                <img src="webp/klint_artbook_cover.webp" data-webp-src="webp/klint_artbook_cover.webp"
                                    data-original-src="picture/klint_artbook_cover.jpg" alt="後腳跟兄弟" data-caption="後腳跟兄弟"
                                    loading="lazy">
                                <figcaption>後腳跟兄弟</figcaption>
                            </figure>

                            <!-- Paro -->
                            <figure class="image-item hidden" data-outfit="paro" data-slide="19">
                                <img src="webp/siu_nicola_klint.webp" data-webp-src="webp/siu_nicola_klint.webp"
                                    data-original-src="picture/siu_nicola_klint.png" alt="吸血鬼"
                                    data-caption="吸血鬼 繪師：Siu Nicola" loading="lazy">
                                <figcaption>吸血鬼<br>繪師：Siu Nicola</figcaption>
                            </figure>

                            <figure class="image-item hidden" data-outfit="paro" data-slide="20">
                                <img src="webp/bat.webp" data-webp-src="webp/bat.webp"
                                    data-original-src="picture/bat.png" alt="蝙蝠" data-caption="蝙蝠 繪師：春日喫茶"
                                    loading="lazy">
                                <figcaption>蝙蝠<br>繪師：春日喫茶</figcaption>
                            </figure>

                            <figure class="image-item hidden" data-outfit="paro" data-slide="21">
                                <img src="webp/duel_klint.webp" data-webp-src="webp/duel_klint.webp"
                                    data-original-src="picture/duel_klint.png" alt="決鬥者" data-caption="決鬥者 繪師：淵夢"
                                    loading="lazy">
                                <figcaption>決鬥者<br>繪師：淵夢</figcaption>
                            </figure>

                            <figure class="image-item hidden" data-outfit="paro" data-slide="22">
                                <img src="webp/placeholder2.webp" data-webp-src="webp/placeholder2.webp"
                                    data-original-src="picture/placeholder2.jpg" alt="placeholder"
                                    data-caption="這套娃衣好難穿" loading="lazy">
                                <figcaption>好想看他們穿和服</figcaption>
                            </figure>

                            <!-- 其他 -->
                            <figure class="image-item hidden spolier" data-outfit="other" data-slide="23">
                                <img src="webp/Genshin_Impact.webp" data-webp-src="webp/Genshin_Impact.webp"
                                    data-original-src="picture/Genshin_Impact.png" alt="原神衝擊" data-caption="玄克里決鬥前"
                                    loading="lazy">
                                <figcaption>劇透注意</figcaption>
                            </figure>

                            <figure class="image-item hidden" data-outfit="other" data-slide="24">
                                <img src="webp/klintbarok.webp" data-webp-src="webp/klintbarok.webp"
                                    data-original-src="picture/klintbarok.png" alt="克里姆特和巴洛克" data-caption="克里姆特和巴洛克"
                                    loading="lazy">
                                <figcaption>克里姆特和巴洛克</figcaption>
                            </figure>

                            <figure class="image-item hidden spolier" data-outfit="other" data-slide="25">
                                <img src="webp/siu_nicola_professor.webp" data-webp-src="webp/siu_nicola_professor.webp"
                                    data-original-src="picture/siu_nicola_professor.png" alt="教授克"
                                    data-caption="水仙 繪師：Siu Nicola" loading="lazy">
                                <div class="outfit-tag">黑色斗篷男和本人</div>
                                <figcaption>水仙（劇透注意）<br>繪師：Siu Nicola</figcaption>
                            </figure>
                        </div>
                    </section>

                    <section class="character-section" data-character="barok">
                        <h3>巴洛克．班吉克斯</h3>
                        <hr style="margin: 1rem 0 1rem; background-color:#e9ecef;border: none;height: 1px;">
                        <div class="character-description">
                            <h4>角色特徵</h4>
                            <ul>
                                <li>克里姆特的弟弟，比他哥哥少10歲</li>
                                <li>身高192，身材偏壯</li>
                                <li>是文靜且關心別人的青年</li>
                                <li>克里姆特死後額頭上才有X型疤痕，也是那時才開始成為不嘻嘻男</li>
                            </ul>
                        </div>

                        <div class="character-images" id="barok-images">
                            <!-- 日常服 (預設顯示) -->
                            <figure class="image-item" data-outfit="daily" data-slide="26">
                                <img src="webp/barok_full_body.webp" data-webp-src="webp/barok_full_body.webp"
                                    data-original-src="picture/barok_full_body.png" alt="正面全身" data-caption="正面全身"
                                    loading="lazy">
                                <figcaption>正面全身</figcaption>
                            </figure>

                            <figure class="image-item" data-outfit="daily" data-slide="27">
                                <img src="webp/barok_full_body_cape.webp" data-webp-src="webp/barok_full_body_cape.webp"
                                    data-original-src="picture/barok_full_body_cape.png" alt="正面全身（有披風）"
                                    data-caption="正面全身（有披風）" loading="lazy">
                                <figcaption>正面全身（有披風）</figcaption>
                            </figure>

                            <figure class="image-item" data-outfit="daily" data-slide="28">
                                <img src="webp/barok_back.webp" data-webp-src="webp/barok_back.webp"
                                    data-original-src="picture/barok_back.png" alt="側面與背面全身" data-caption="側面與背面全身"
                                    loading="lazy">
                                <figcaption>側面與背面全身</figcaption>
                            </figure>

                            <figure class="image-item" data-outfit="daily" data-slide="29">
                                <img src="webp/barok_young.webp" data-webp-src="webp/barok_young.webp"
                                    data-original-src="picture/barok_young.jpg" alt="年輕巴洛克" data-caption="年輕巴洛克"
                                    loading="lazy">
                                <figcaption>年輕巴洛克</figcaption>
                            </figure>

                            <figure class="image-item" data-outfit="daily" data-slide="30">
                                <img src="webp/barok_kimono.webp" data-webp-src="webp/barok_kimono.webp"
                                    data-original-src="picture/barok_kimono.jpg" alt="巴洛克穿和服" data-caption="巴洛克穿和服"
                                    loading="lazy">
                                <figcaption>巴洛克穿和服</figcaption>
                            </figure>

                            <figure class="image-item" data-outfit="daily" data-slide="31">
                                <img src="webp/meowzieks.webp" data-webp-src="webp/meowzieks.webp"
                                    data-original-src="picture/meowzieks.png" alt="貓貓吉祥物" data-caption="貓貓吉祥物"
                                    loading="lazy">
                                <figcaption>貓貓吉祥物</figcaption>
                            </figure>
                        </div>
                    </section>

                    <hr>
                    <footer>
                        <p>本網站由tong1743製作，內容與一切官方無關<br>想不到下面要放什麼所以放點隨機說話</p>
                        <p class="random-word"></p>
                    </footer>
                    <!-- 返回頂部按鈕 -->
                    <button id="backToTopBtn">
                        <img src="picture/backtotop.gif" alt="回到頂端" />
                    </button>
            </main>


        </div>
        <!-- 模態視窗 -->
        <div id="imageModal" class="modal">
            <div class="zoom-info">
                ↔ 切換圖片 | ↕ /滾輪 縮放 | 拖拽 移動 | ESC 關閉
            </div>

            <!-- 下載圖片按鈕 -->

            <button class="modal-prev" onclick="plusSlides(-1)">&#10094;</button>
            <div class="zoom-controls">
                <button class="zoom-btn" id="zoomIn" title="放大">+</button>
                <button class="zoom-btn" id="zoomOut" title="縮小">−</button>
                <button class="zoom-btn" id="zoomReset" title="重置">⟲</button>
            </div>


            <div class="modal-content">
                <div class="buttons">
                    <span class="close" onclick="closeModal()">&times;</span>
                    <div class="download-controls">
                        <button class="download-btn" id="downloadOriginal" title="下載原始尺寸圖片" disabled>
                            <span class="download-icon"></span>
                        </button>
                    </div>
                </div>
                <!-- 視窗容器 -->
                <div class="modal-viewport">
                    <div id="modalImageContainer" class="modal-image-container">
                        <!-- 圖片會在這裡動態插入 -->
                        <img id="modalImage" alt="圖片預覽">
                    </div>

                    <!-- 載入指示器 -->
                    <div class="loading-indicator" style="display: none;">
                        <div class="spinner"></div>
                        <p>載入中...</p>
                    </div>
                </div>

                <button class="modal-next" onclick="plusSlides(1)">&#10095;</button>
                <div class="modal-caption" id="caption">點擊圖片查看預覽</div>

                <!-- 下載提示 -->
                <div id="downloadTooltip" class="download-tooltip"></div>
            </div>






            <script>

                function sleep(ms) {
                    return new Promise(resolve => setTimeout(resolve, ms))
                }
                // 服裝配置
                const outfitConfig = {
                    'genshin': {
                        outfits: ['daily', 'paro', 'other'],
                        names: ['日常服', 'PARO', '其他']
                    },
                    'klint': {
                        outfits: ['daily', 'paro', 'other'],
                        names: ['日常服', 'PARO', '其他']
                    },
                };

                // 追蹤每個角色的當前服裝
                let currentOutfits = {
                    'genshin': 0,
                    'klint': 0,
                };

                // 模態視窗變數
                let slideIndex = 1;
                let zoomLevel = 1;
                let isZoomed = false;
                let isDragging = false;
                let startX, startY, translateX = 0, translateY = 0;
                let currentImageElement = null; // 追蹤當前圖片元素
                let currentOriginalSrc = ''; // 追蹤原始圖片來源
                let downloadTooltipTimeout = null; // 提示計時器

                // 服裝切換函數
                function changeOutfit(characterId, direction) {
                    const config = outfitConfig[characterId];
                    const currentIndex = currentOutfits[characterId];
                    const newIndex = (currentIndex + direction + config.outfits.length) % config.outfits.length;

                    currentOutfits[characterId] = newIndex;

                    // 更新指示器
                    const indicator = document.getElementById(`outfit-indicator-${characterId.replace('character-', '')}`);
                    indicator.textContent = config.names[newIndex];

                    // 更新按鈕狀態
                    updateOutfitButtons(characterId);

                    // 切換圖片
                    switchImages(characterId, config.outfits[newIndex]);
                }

                // 更新服裝按鈕狀態
                function updateOutfitButtons(characterId) {
                    const config = outfitConfig[characterId];
                    const currentIndex = currentOutfits[characterId];

                    const prevBtn = document.querySelector(`[data-character="${characterId}"] .outfit-prev`);
                    const nextBtn = document.querySelector(`[data-character="${characterId}"] .outfit-next`);

                    // 所有按鈕都可用（循環切換）
                    prevBtn.disabled = false;
                    nextBtn.disabled = false;
                }

                // 切換圖片顯示
                function switchImages(characterId, outfitType) {
                    const imagesContainer = document.getElementById(`${characterId}-images`);
                    const imageItems = imagesContainer.querySelectorAll('.image-item');

                    imageItems.forEach(item => {
                        if (item.dataset.outfit === outfitType) {
                            item.classList.remove('hidden');
                        } else {
                            item.classList.add('hidden');
                        }
                    });

                    // 重新綁定事件
                    bindImageClickEvents();
                }

                // 打開模態視窗
                async function openModal(slideNumber) {
                    document.getElementById('imageModal').style.display = 'block';
                    document.body.style.overflow = 'hidden';

                    var imageContainer = document.getElementById('modalImageContainer');
                    if (imageContainer) imageContainer.classList.add('prepare');
                    // 隱藏 navMenuBtn
                    var navMenuBtn = document.getElementById('navMenuBtn');
                    if (navMenuBtn) navMenuBtn.classList.add('hidden');
                    // 隱藏 backToTopBtn
                    var backToTopBtn = document.getElementById('backToTopBtn');
                    if (backToTopBtn) backToTopBtn.classList.add('hidden');
                    // 重置縮放和位置
                    // 等待圖片載入完成
                    slideIndex = slideNumber;
                    showSlides(slideNumber);
                    await sleep(500);
                    resetZoom();
                    imageContainer.classList.remove('prepare')



                }

                // 關閉模態視窗
                function closeModal() {
                    document.getElementById('imageModal').style.display = 'none';
                    document.body.style.overflow = 'auto';
                    // 顯示 navMenuBtn
                    var navMenuBtn = document.getElementById('navMenuBtn');
                    if (navMenuBtn) navMenuBtn.classList.remove('hidden');
                    // 顯示 backToTopBtn
                    var backToTopBtn = document.getElementById('backToTopBtn');
                    if (backToTopBtn) backToTopBtn.classList.remove('hidden');
                    slideIndex = 1;
                    resetZoom();
                    // 重置拖拽狀態
                    isDragging = false;
                    currentImageElement = null;
                    currentOriginalSrc = ''; // 清除原始圖片來源
                    updateDownloadButton(); // 禁用下載按鈕
                }

                // 顯示指定幻燈片
                function currentSlide(n) {
                    showSlides(slideIndex = n);
                }

                // 切換幻燈片
                function plusSlides(n) {
                    const totalSlides = document.querySelectorAll('.image-item[data-slide]').length;
                    slideIndex = slideIndex + n;
                    if (slideIndex > totalSlides) { slideIndex = 1 }
                    if (slideIndex < 1) { slideIndex = totalSlides }
                    showSlides(slideIndex);
                    resetZoom(); // 切換圖片時重置縮放
                }

                // 在 showSlides 函數中修改圖片創建部分
                function showSlides(n) {
                    const modalImg = document.getElementById('modalImg');
                    const captionText = document.getElementById('caption');
                    const imageContainer = document.getElementById('modalImageContainer');
                    const prevBtn = document.querySelector('.modal-prev');
                    const nextBtn = document.querySelector('.modal-next');

                    // 找到對應的圖片元素
                    const allImageItems = document.querySelectorAll('.image-item[data-slide]');
                    const targetItem = Array.from(allImageItems).find(item => parseInt(item.dataset.slide) === n);

                    if (targetItem) {
                        const imgElement = targetItem.querySelector('img');
                        const placeholderElement = targetItem.querySelector('.image-placeholder');

                        // 清空容器
                        imageContainer.innerHTML = '';

                        if (imgElement && imgElement.src) {
                            // 顯示真實圖片
                            const img = document.createElement('img');
                            img.src = imgElement.src;
                            img.alt = imgElement.alt;
                            img.dataset.caption = imgElement.dataset.caption;
                            currentOriginalSrc = imgElement.getAttribute('data-original-src') // 儲存原始來源
                            

                            // 等待圖片載入完成
                            img.onload = function () {
                                updateDownloadButton(); // 圖片載入後啟用下載按鈕
                            };
                            img.onerror = function () {
                                currentOriginalSrc = ''; // 載入失敗時清除來源
                                updateDownloadButton();
                            };

                            imageContainer.appendChild(img);
                            captionText.textContent = imgElement.dataset.caption || imgElement.alt;

                            // 儲存當前圖片元素引用
                            currentImageElement = img;

                            // 綁定事件 - 使用新的拖拽邏輯
                            bindImageEvents(img);
                        } else if (placeholderElement) {
                            // 顯示佔位符
                            const placeholder = document.createElement('div');
                            placeholder.className = 'modal-placeholder';
                            placeholder.innerHTML = placeholderElement.innerHTML;
                            placeholder.dataset.caption = placeholderElement.dataset.caption;
                            imageContainer.appendChild(placeholder);
                            captionText.textContent = placeholderElement.dataset.caption || '預覽圖片';
                            currentImageElement = null;
                            currentOriginalSrc = ''; // 清除原始來源
                            updateDownloadButton(); // 禁用下載按鈕
                        }

                        // 更新按鈕狀態
                        prevBtn.disabled = n === 1;
                        nextBtn.disabled = n === allImageItems.length;

                        // 重置縮放狀態
                        imageContainer.classList.remove('zoomed');
                        isZoomed = false;
                        zoomLevel = 1;
                        translateX = 0;
                        translateY = 0;
                        imageContainer.style.transform = 'scale(1) translate(0px, 0px)';

                        // 強制圖片自適應
                        var img = imageContainer.querySelector('img');
                        if (img) {
                            img.style.maxWidth = '100%';
                            img.style.maxHeight = '100%';
                            img.style.width = 'auto';
                            img.style.height = 'auto';
                        }

                        // 初始狀態更新下載按鈕
                        updateDownloadButton();
                    }
                }

                // 顯示下載提示
                function showDownloadTooltip(message, duration = 2000) {
                    const tooltip = document.getElementById('downloadTooltip');
                    tooltip.textContent = message;

                    // 清除之前的計時器
                    if (downloadTooltipTimeout) {
                        clearTimeout(downloadTooltipTimeout);
                    }

                    // 顯示提示
                    tooltip.classList.add('show');

                    // 計算位置（顯示在下載按鈕上方）
                    const downloadBtn = document.getElementById('downloadOriginal');
                    if (downloadBtn) {
                        const rect = downloadBtn.getBoundingClientRect();
                        tooltip.style.left = rect.left + (rect.width / 2) + 'px';
                        tooltip.style.top = (rect.top - 10) + 'px';
                        tooltip.style.transform = 'translateX(-50%)';
                    }

                    // 隱藏提示
                    downloadTooltipTimeout = setTimeout(() => {
                        tooltip.classList.remove('show');
                    }, duration);
                }

                // 啟用/禁用下載按鈕
                function updateDownloadButton() {
                    const downloadBtn = document.getElementById('downloadOriginal');
                    const currentImg = document.querySelector('#modalImageContainer img');

                    if (currentImg && currentImg.src && currentImg.src !== '' && currentOriginalSrc) {
                        downloadBtn.disabled = false;
                        downloadBtn.title = `下載原始尺寸圖片 (${currentOriginalSrc.split('/').pop() || 'image.png'})`;
                    } else {
                        downloadBtn.disabled = true;
                        downloadBtn.title = '下載原始尺寸圖片';
                    }
                }
                // 下載原始尺寸圖片
                function downloadOriginalImage() {
                    if (!currentOriginalSrc) {
                        showDownloadTooltip('無圖片可下載');
                        return;
                    }

                    // 獲取圖片副檔名
                    const urlParts = currentOriginalSrc.split('.');
                    const extension = urlParts[urlParts.length - 1].split('?')[0] || 'png';
                    const fileName = `image_${Date.now()}.${extension}`;

                    const link = document.createElement('a');
                    link.href = currentOriginalSrc;
                    link.download = fileName;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);

                    showDownloadTooltip(`"${fileName}" 下載完成`);
                }

                // 綁定圖片事件
                function bindImageEvents(img) {
                    // 雙擊縮放
                    img.addEventListener('dblclick', function (e) {
                        e.preventDefault();
                        e.stopPropagation();
                        if (zoomLevel > 1) {
                            resetZoom();
                        } else {
                            zoomIn();
                        }
                    });

                    // 滑鼠滾輪縮放
                    img.addEventListener('wheel', function (e) {
                        e.preventDefault();
                        e.stopPropagation();
                        if (e.deltaY < 0) {
                            zoomIn();
                        } else {
                            zoomOut();
                        }
                    });

                    // 開始拖拽
                    img.addEventListener('mousedown', function (e) {
                        e.preventDefault();
                        startDrag(e);
                    });

                    // 觸控支持
                    let initialDistance = 0;
                    img.addEventListener('touchstart', function (e) {
                        if (e.touches.length === 2) {
                            e.preventDefault();
                            initialDistance = Math.hypot(
                                e.touches[0].clientX - e.touches[1].clientX,
                                e.touches[0].clientY - e.touches[1].clientY
                            );
                        } else if (e.touches.length === 1) {
                            e.preventDefault();
                            startDrag(e);
                        }
                    });

                    img.addEventListener('touchmove', function (e) {
                        if (e.touches.length === 2 && initialDistance > 0) {
                            e.preventDefault();
                            const currentDistance = Math.hypot(
                                e.touches[0].clientX - e.touches[1].clientX,
                                e.touches[0].clientY - e.touches[1].clientY
                            );
                            const scaleChange = currentDistance / initialDistance;
                            const oldZoom = zoomLevel;
                            zoomLevel *= scaleChange;
                            // clamp to minScale and max 3
                            const minScale = getMinScaleToFillViewport();
                            zoomLevel = Math.max(minScale, Math.min(3, zoomLevel));
                            if (oldZoom !== zoomLevel) {
                                updateZoom();
                            }
                            initialDistance = currentDistance;
                        }
                    });

                    img.addEventListener('touchend', function (e) {
                        initialDistance = 0;
                    });
                }

                // 縮放功能
                function zoomIn() {
                    if (!isZoomed) {
                        isZoomed = true;
                        const imageContainer = document.getElementById('modalImageContainer');
                        imageContainer.classList.add('zoomed');
                    }
                    const oldZoom = zoomLevel;
                    zoomLevel = Math.min(zoomLevel + 0.2, 3);

                    // 如果是第一次放大，保持當前位置
                    if (oldZoom <= 1.01 && zoomLevel > 1.01) {
                        translateX = 0;
                        translateY = 0;
                    }

                    updateZoom();

                    // 縮放後檢查邊界
                    constrainDragBounds();
                }

                function zoomOut() {
                    const imageContainer = document.getElementById('modalImageContainer');
                    const img = imageContainer ? imageContainer.querySelector('img') : null;
                    if (!img) return;

                    const minScale = getMinScaleToFillViewport();
                    const oldZoom = zoomLevel;
                    zoomLevel = Math.max(zoomLevel * 0.8, minScale);

                    updateZoom();

                    // 如果縮放到最小，回到中心
                    if (zoomLevel <= minScale + 0.01) {
                        translateX = 0;
                        translateY = 0;
                        updateZoom();
                    } else {
                        // 縮放後檢查邊界
                        constrainDragBounds();
                    }
                }

                /**
                 * 重置圖片縮放和位置到初始狀態（絕對定位置中）
                 */
                async function resetZoom() {
                    const imageContainer = document.getElementById('modalImageContainer');
                    const img = imageContainer ? imageContainer.querySelector('img') : null;

                    imageContainer.classList.add('prepare');


                    if (img.naturalWidth < 100 && img.naturalHeight < 100) {
                        await sleep(100);
                        resetZoom();
                    } else {

                        // 重置全域變數
                        translateX = 0;
                        translateY = 0;
                        isZoomed = false;
                        if (imageContainer) {
                            imageContainer.classList.remove('zoomed');
                        }

                        if (img) {
                            // 重置圖片樣式
                            const resetStyles = {
                                width: 'auto',
                                height: 'auto',
                                maxWidth: 'none',
                                maxHeight: 'none',
                                position: 'absolute',
                                left: '0',
                                top: '0',
                                transform: 'none',
                                display: 'block'
                            };

                            Object.assign(img.style, resetStyles);
                            img.removeAttribute('width');
                            img.removeAttribute('height');

                            // 重置容器
                            if (imageContainer) {
                                imageContainer.style.position = 'relative';
                                imageContainer.style.width = '100%';
                                imageContainer.style.height = '100%';
                                imageContainer.style.transform = 'none';
                            }

                            requestAnimationFrame(() => {
                                if (imageContainer) imageContainer.offsetHeight;


                                // 計算初始縮放
                                const fillScale = getMinScaleToFillViewport();
                                zoomLevel = fillScale;

                                // 應用置中縮放
                                updateZoom();
                            });
                        }
                        imageContainer.classList.remove('prepare');
                    }
                }


                /**
                 * 應用縮放和平移變換，使用絕對定位實現精確置中
                 */
                function updateZoom() {
                    const imageContainer = document.getElementById('modalImageContainer');
                    const img = imageContainer ? imageContainer.querySelector('img') : null;
                    const viewport = document.querySelector('.modal-viewport');

                    imageContainer.classList.add('prepare');


                    if (!img || !viewport || !imageContainer) {
                        console.error('缺少必要元素');
                        return;
                    }

                    const minScale = getMinScaleToFillViewport();
                    if (zoomLevel < minScale) {
                        zoomLevel = minScale;
                    }


                    sleep(1000);

                    // 獲取視窗尺寸
                    const viewportRect = viewport.getBoundingClientRect();
                    const vw = viewportRect.width;  // 1160
                    const vh = viewportRect.height; // 760

                    // 計算縮放後的圖片尺寸
                    const scaledWidth = img.naturalWidth * zoomLevel;   // 212
                    const scaledHeight = img.naturalHeight * zoomLevel; // 760



                    // 清除圖片的所有樣式
                    img.style.width = 'auto';
                    img.style.height = 'auto';
                    img.style.maxWidth = 'none';
                    img.style.maxHeight = 'none';
                    img.style.transform = 'none';
                    img.style.display = 'block';

                    // 確保容器正確設置
                    imageContainer.style.position = 'relative';
                    imageContainer.style.width = '100%';
                    imageContainer.style.height = '100%';
                    imageContainer.style.overflow = 'visible';



                    // 等待樣式更新完成
                    requestAnimationFrame(() => {
                        // 強制觸發重繪
                        imageContainer.offsetHeight;

                        // 關鍵：直接設置圖片的位置和尺寸，繞過 transform 置中問題
                        // 1. 設置圖片絕對尺寸（不使用縮放）
                        img.style.position = 'absolute';
                        img.style.width = scaledWidth + 'px';
                        img.style.height = scaledHeight + 'px';
                        img.style.left = '0px';
                        img.style.top = '0px';

                        // 2. 計算置中位置
                        const centerLeft = (vw - scaledWidth) / 2;  // (1160 - 212) / 2 = 474px
                        const centerTop = (vh - scaledHeight) / 2;  // (760 - 760) / 2 = 0px

                        // 3. 應用置中定位
                        img.style.left = centerLeft + translateX + 'px';
                        img.style.top = centerTop + translateY + 'px';



                        // 4. 容器只處理手動縮放（如果需要）
                        // 這裡我們不對容器應用 transform，讓圖片直接控制尺寸和位置
                        imageContainer.style.transform = 'none';
                        imageContainer.style.transformOrigin = '0 0';


                        // 更新縮放狀態
                        if (zoomLevel > minScale + 0.01) {
                            imageContainer.classList.add('zoomed');
                            isZoomed = true;
                        } else {
                            imageContainer.classList.remove('zoomed');
                            isZoomed = false;
                        }
                        sleep(1000);
                        imageContainer.classList.remove('prepare');

                    });
                }





                // 拖拽功能 - 修正版本
                function startDrag(e) {
                    const minScale = getMinScaleToFillViewport();
                    if (!isZoomed || zoomLevel <= minScale + 0.01) return;

                    isDragging = true;
                    startX = e.clientX || (e.touches && e.touches[0] && e.touches[0].clientX);
                    startY = e.clientY || (e.touches && e.touches[0] && e.touches[0].clientY);

                    // 改變鼠標樣式
                    const imageContainer = document.getElementById('modalImageContainer');
                    imageContainer.style.cursor = 'grabbing';

                    // 綁定拖拽事件
                    document.addEventListener('mousemove', drag, { passive: false });
                    document.addEventListener('touchmove', drag, { passive: false });
                    document.addEventListener('mouseup', stopDrag, { passive: false });
                    document.addEventListener('touchend', stopDrag, { passive: false });

                    e.preventDefault();
                    e.stopPropagation();
                }

                function drag(e) {
                    if (!isDragging) return;

                    e.preventDefault();
                    e.stopPropagation();

                    const clientX = e.clientX || (e.touches && e.touches[0] && e.touches[0].clientX);
                    const clientY = e.clientY || (e.touches && e.touches[0] && e.touches[0].clientY);

                    if (clientX !== undefined && clientY !== undefined) {
                        // 計算移動距離
                        const deltaX = clientX - startX;
                        const deltaY = clientY - startY;

                        // 直接更新位置
                        translateX += deltaX;
                        translateY += deltaY;

                        // 更新起始點
                        startX = clientX;
                        startY = clientY;

                        // 更新顯示
                        updateZoom();
                    }
                }

                function stopDrag(e) {
                    if (!isDragging) return;

                    isDragging = false;

                    // 恢復鼠標樣式
                    const imageContainer = document.getElementById('modalImageContainer');
                    imageContainer.style.cursor = 'grab';

                    // 拖拽結束時檢查邊界
                    constrainDragBounds();

                    // 移除拖拽事件
                    document.removeEventListener('mousemove', drag);
                    document.removeEventListener('touchmove', drag);
                    document.removeEventListener('mouseup', stopDrag);
                    document.removeEventListener('touchend', stopDrag);

                    e.preventDefault();
                    e.stopPropagation();
                }

                function constrainDragBounds() {
                    const imageContainer = document.getElementById('modalImageContainer');
                    const img = imageContainer ? imageContainer.querySelector('img') : null;
                    const viewport = document.querySelector('.modal-viewport');

                    if (!img || !viewport || !isZoomed) return;

                    const minScale = getMinScaleToFillViewport();
                    if (zoomLevel <= minScale + 0.01) {
                        translateX = 0;
                        translateY = 0;
                        return;
                    }

                    // 獲取實際尺寸
                    const viewportRect = viewport.getBoundingClientRect();
                    const naturalW = img.naturalWidth;
                    const naturalH = img.naturalHeight;

                    // 計算縮放後的圖片尺寸
                    const scaledWidth = naturalW * zoomLevel;
                    const scaledHeight = naturalH * zoomLevel;

                    // 計算最大拖拽距離（圖片中心可以移動的距離）
                    const maxTranslateX = Math.max(0, (scaledWidth - viewportRect.width));
                    const maxTranslateY = Math.max(0, (scaledHeight - viewportRect.height));

                    // 限制在邊界內
                    translateX = Math.max(-maxTranslateX, Math.min(maxTranslateX, translateX));
                    translateY = Math.max(-maxTranslateY, Math.min(maxTranslateY, translateY));

                    // 應用限制後的位置
                    updateZoom();
                }

                // 計算讓圖片長邊完整顯示在 modal-viewport 的最小縮放比例
                function getMinScaleToFillViewport() {
                    const imageContainer = document.getElementById('modalImageContainer');
                    const viewport = document.querySelector('.modal-viewport');
                    const img = imageContainer ? imageContainer.querySelector('img') : null;
                    if (!img || !viewport) return 1;


                    // 等待圖片載入完成
                    if (!img.naturalWidth || !img.naturalHeight) {
                        // 如果圖片還沒載入完成，返回 1
                        return 1;
                    }

                    const naturalW = img.naturalWidth;
                    const naturalH = img.naturalHeight;
                    const viewportRect = viewport.getBoundingClientRect();
                    const vw = viewportRect.width;
                    const vh = viewportRect.height;

                    if (!naturalW || !naturalH || vw <= 0 || vh <= 0) return 1;

                    // 判斷圖片是否需要縮小（任一邊超過視窗）
                    const needsScalingDown = naturalW > vw || naturalH > vh;

                    // 計算水平和垂直方向的縮放比例
                    const scaleX = vw / naturalW;  // 寬度填滿視窗的縮放比例
                    const scaleY = vh / naturalH;  // 高度填滿視窗的縮放比例

                    // 計算圖片和容器的縱橫比
                    const imageAspectRatio = naturalW / naturalH;  // 圖片的寬高比
                    const viewportAspectRatio = vw / vh;           // 容器的寬高比

                    // 關鍵邏輯：根據縱橫比決定使用哪個縮放比例
                    // 讓長邊填滿容器，短邊絕對不溢出
                    if (imageAspectRatio > viewportAspectRatio) {
                        // 情況1：圖片「更寬」（寬度是限制因素）
                        // - 使用 scaleX，讓寬度填滿容器
                        // - 高度會按比例縮放，可能留白（但絕不溢出）
                        return scaleX;
                    } else {
                        // 情況2：圖片「更高」或「等寬高」（高度是限制因素）
                        // - 使用 scaleY，讓高度填滿容器
                        // - 寬度會按比例縮放，可能留白（但絕不溢出）
                        return scaleY;
                    }
                }
                // 動態綁定點擊事件給所有可點擊元素
                function bindImageClickEvents() {
                    const allClickableElements = document.querySelectorAll('.image-item:not(.hidden) img, .image-item:not(.hidden) .image-placeholder');
                    allClickableElements.forEach(element => {
                        element.removeEventListener('click', handleImageClick);
                        element.addEventListener('click', handleImageClick);
                    });
                }

                // 統一的圖片點擊處理函數
                function handleImageClick(event) {
                    const imageItem = event.currentTarget.closest('.image-item');
                    const slideNumber = parseInt(imageItem.dataset.slide);

                    if (slideNumber) {
                        openModal(slideNumber);
                    }
                }

                // 鍵盤事件處理
                document.addEventListener('keydown', function (event) {
                    if (document.getElementById('imageModal').style.display === 'block') {
                        switch (event.key) {
                            case 'Escape':
                                closeModal();
                                break;
                            case 'ArrowLeft':
                                plusSlides(-1);
                                break;
                            case 'ArrowRight':
                                plusSlides(1);
                                break;
                            case 'ArrowUp':
                                zoomIn();
                                break;
                            case 'ArrowDown':
                                zoomOut();
                                break;
                            case '+':
                            case '=':
                                event.preventDefault();
                                zoomIn();
                                break;
                            case '-':
                                event.preventDefault();
                                zoomOut();
                                break;
                            case '0':
                                event.preventDefault();
                                resetZoom();
                                break;
                        }
                    }
                });

                // 滑鼠滾輪縮放
                document.getElementById('modalImageContainer').addEventListener('wheel', function (e) {
                    e.preventDefault();
                    if (e.deltaY < 0) {
                        zoomIn();
                    } else {
                        zoomOut();
                    }
                });

                // 雙擊縮放
                document.getElementById('modalImageContainer').addEventListener('dblclick', function (e) {
                    e.preventDefault();
                    if (zoomLevel > 1) {
                        resetZoom();
                    } else {
                        zoomIn();
                    }
                });

                // 觸控支持
                let initialDistance = 0;
                document.getElementById('modalImageContainer').addEventListener('touchstart', function (e) {
                    if (e.touches.length === 2) {
                        initialDistance = Math.hypot(
                            e.touches[0].clientX - e.touches[1].clientX,
                            e.touches[0].clientY - e.touches[1].clientY
                        );
                    } else if (e.touches.length === 1) {
                        startDrag(e);
                    }
                });

                document.getElementById('modalImageContainer').addEventListener('touchmove', function (e) {
                    if (e.touches.length === 2 && initialDistance > 0) {
                        const currentDistance = Math.hypot(
                            e.touches[0].clientX - e.touches[1].clientX,
                            e.touches[0].clientY - e.touches[1].clientY
                        );
                        const scaleChange = currentDistance / initialDistance;
                        zoomLevel *= scaleChange;
                        // clamp to minScale and max 3
                        const minScale = getMinScaleToFillViewport();
                        zoomLevel = Math.max(minScale, Math.min(3, zoomLevel));
                        updateZoom();
                        initialDistance = currentDistance;
                        e.preventDefault();
                    }
                });

                document.getElementById('modalImageContainer').addEventListener('touchend', function (e) {
                    initialDistance = 0;
                });

                // 縮放按鈕事件
                document.getElementById('zoomIn').addEventListener('click', zoomIn);
                document.getElementById('zoomOut').addEventListener('click', zoomOut);
                document.getElementById('zoomReset').addEventListener('click', resetZoom);

                // 滑鼠拖拽
                document.getElementById('modalImageContainer').addEventListener('mousedown', startDrag);

                // 點擊模態背景關閉
                document.getElementById('imageModal').addEventListener('click', function (event) {
                    if (event.target === this) {
                        closeModal();
                    }
                });

                // 初始化
                document.addEventListener('DOMContentLoaded', function () {
                    // 初始化服裝顯示
                    Object.keys(outfitConfig).forEach(characterId => {
                        const config = outfitConfig[characterId];
                        switchImages(characterId, config.outfits[0]);
                    });

                    // 綁定點擊事件
                    bindImageClickEvents();
                    // 新增：下載按鈕事件
                    document.getElementById('downloadOriginal').addEventListener('click', function () {
                        downloadOriginalImage();
                    });

                    // 初始狀態：禁用下載按鈕
                    updateDownloadButton();
                });

                //二級選單
                document.querySelectorAll('.submenu-toggle').forEach(function (toggle) {
                    toggle.addEventListener('click', function (e) {
                        e.preventDefault();
                        const group = this.closest('.submenu-group');
                        group.classList.toggle('open');
                    });
                });

                // 隨機說話
                function getRandomWord() {
                    const wordList = [
                        "請大家支持克里姆特切腹因為這是日本版的榮譽的死亡",
                        "說是決鬥但其實更像介錯",
                        "賀！玄克里終於要出官方週邊了！",
                        "我的同人女潔癖是只有玄真能殺死克里姆特",
                        "我喜歡玄真的遺書中講他自己一生從沒有後悔二字",
                        "亞雙義玄真的臉很常跳嚇到我和我朋友",
                        "玄真有8張官方圖然後有5.5張都在雙手抱胸",
                        "玄真唯二是有在笑的圖是跟他兒子的合照",
                        "我在排版時看到玄真的立繪就想笑",
                        "玄真的英文名叫Genshin（真的）",
                        "圖設定中有玄真衝擊",
                    ];
                    return wordList[Math.floor(Math.random() * wordList.length)];
                }
                var randomWord = document.querySelector('.random-word');
                randomWord.textContent = getRandomWord();
                // 晚間模式切換
                var darkModeBtn = document.getElementById('toggleDarkModeBtn');
                function setDarkMode(on) {
                    document.body.classList.toggle('dark-mode', on);
                    darkModeBtn.textContent = on ? '☀  日間模式' : '☽ 晚間模式';
                }
                darkModeBtn.addEventListener('click', function () {
                    var isDark = document.body.classList.toggle('dark-mode');
                    darkModeBtn.textContent = isDark ? '☀  日間模式' : '☽ 晚間模式';
                    try { localStorage.setItem('darkMode', isDark ? '1' : '0'); } catch (e) { }
                });
                // 自動載入上次選擇
                (function () {
                    try {
                        var saved = localStorage.getItem('darkMode');
                        if (saved === '1') setDarkMode(true);
                    } catch (e) { }
                })();
                // 側邊導覽列開關
                var navMenuBtn = document.getElementById('navMenuBtn');
                var sideNav = document.getElementById('sideNav');
                var sideNavMask = document.querySelector('.side-nav-mask');
                function setSideNavOpen(open) {
                    if (open) {
                        sideNav.classList.add('open');
                    } else {
                        sideNav.classList.remove('open');
                    }
                }
                navMenuBtn.addEventListener('click', function () {
                    var isOpen = sideNav.classList.contains('open');
                    setSideNavOpen(!isOpen);
                });
                sideNavMask.addEventListener('click', function () {
                    setSideNavOpen(false);
                });

                // 返回頂部按鈕顯示/隱藏
                var backToTopBtn = document.getElementById('backToTopBtn');
                window.addEventListener('scroll', function () {
                    if (window.scrollY > 150) {
                        backToTopBtn.classList.add('visible');
                    } else {
                        backToTopBtn.classList.remove('visible');
                    }
                });
                backToTopBtn.addEventListener('click', function () {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });


            </script>
</body>

</html>