<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta property="og:title" content="玄克里設定" />
    <meta property="og:description" content="圖片設定" />
    <meta property="og:image" content="picture/genshin_jumpscare.png" />
    <link rel="icon" type="image/png" href="picture/icon.png">
    <link rel="stylesheet" href="common/common_css.css">
    <link rel="stylesheet" href="non_common/chara_pic.css">
    <style>
        /* 二階選單樣式（小段內嵌樣式，輕量） */
        .side-nav .submenu-group {
            margin: 6px 0;
        }

        /* header 容器：包含連結與 caret，以便 caret 成為相鄰元素 */
        .side-nav .submenu-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .side-nav .submenu-toggle {
            display: block;
        }

        /* 使用 max-height + opacity 做平滑展開動畫；避免使用 display:none/block 因為無法過渡 */
        .side-nav .submenu {
            display: block;
            /* 保留在文件流中，使用 max-height 控制可見性 */
            padding-left: 0.75rem;
            margin-top: 4px;
            overflow: hidden;
            max-height: 0;
            /* 折疊狀態 */
            opacity: 0;
            transform: translateY(-6px);
            transition: max-height 1560ms, opacity 200ms ease, transform 200ms ease;
        }

        .side-nav .submenu a {
            display: block;
            padding: 6px 10px;
            font-size: 0.95rem;
            color: inherit;
            text-decoration: none;
        }

        .side-nav .submenu-group.open>.submenu {
            /* 展開狀態：給足夠的 max-height 以容納內部連結（若項目數很多，可調大） */
            max-height: 600px;
            opacity: 1;
            transform: translateY(0);
        }

        .side-nav .submenu-header .caret {
            margin-left: 0.5rem;
            font-size: 0.9rem;
            display: inline-flex;
            align-items: center;
            padding: 18px 32px;
            text-decoration: none;
            font-size: 1.2em;
            height: 100%;
        }

        .side-nav .caret-arrow {
            background: white;
            width: 1.2em;
            height: 20px;
            mask: url(../icon/left-arrow.svg) no-repeat center center;
            -webkit-mask: url(../icon/left-arrow.svg) no-repeat center center;
            mask-size: contain;
            -webkit-mask-size: contain;
            position: relative;
            transform: rotate(-90deg);
            transition: transform .1s linear;
        }

        .side-nav .caret.open .caret-arrow {
            transform: rotate(90deg);
        }
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>角色圖片設定</title>
</head>

<body>
    <!--為什麼要偷看我的屎山代碼-->
    <!-- 新導覽列按鈕與遮罩 -->
    <nav id="sideNav" class="side-nav">
        <button id="navMenuBtn" aria-label="開啟選單">
            <span class="menu-icon">☰</span>
            <span class="close-icon">×</span>
        </button>
        <!-- 側邊導覽列 -->
        <a href="index.html">首頁</a>
        <a href="chara_pic.html" class="active submenu-toggle">圖片設定</a>
        <a href="chara_setting.html">文字設定</a>
        <a href="acknowledgement.html">標註/鳴謝</a>
        <a href="report.html">問題回報</a>
        <!-- 晚間模式切換按鈕 -->
        <button id="toggleDarkModeBtn">☽ 晚間模式</button>
    </nav>
    <div class="side-nav-mask"></div>

    <!-- 背景橫幅 -->
    <div class="banner">
        <div class="banner-content">
            <h1>圖片設定</h1>
        </div>
    </div>

    <!-- 主要內容 -->
    <div class="main-content">
        <h2>預警</h2>
        <p>本網頁的圖片如無標註，皆為出自Capcom的官方資料。<br>娃娃圖片都只是佔位符不用太在意。<br>家紋像素繪師：米卡</p>
        <div class="container">

            <main class="character-gallery">
                <section class="character-section" data-character="genshin">
                    <h3>亞雙義玄真</h3>

                    <div class="outfit-controls" data-character="genshin">
                        <div class="outfit-buttons"></div>
                    </div>

                    <div class="character-description">
                        <h4>角色特徵</h4>
                        <ul>
                            <li>33歲，來自日本的蘇格蘭場刑警</li>
                            <li>身高185，身材偏瘦，身上可以自由加上傷疤</li>
                            <li>表情：平常都是嚴肅樣，即使笑也是嘴角上移2px</li>
                            <li>左手無名指戴著戒指，髮帶即使沒有風也不會垂下</li>
                    </div>



                    <div class="character-images" id="genshin-images">
                        <!-- 日常服 (預設顯示) -->
                        <figure class="image-item" data-outfit="daily" data-slide="1">
                            <img src="webp/Genshin_Full_Body.webp" data-webp-src="webp/Genshin_Full_Body.webp"
                                data-original-src="picture/Genshin_Full_Body.png" alt="正面全身立繪" data-caption="正面全身立繪"
                                loading="lazy">
                            <figcaption>正面全身立繪</figcaption>
                        </figure>

                        <figure class="image-item" data-outfit="daily" data-slide="2">
                            <img src="webp/GenshinArtbook.webp" data-webp-src="webp/GenshinArtbook.webp"
                                data-original-src="picture/GenshinArtbook.png" alt="正面+側面" data-caption="正面+側面"
                                loading="lazy">
                            <figcaption>正面+側面</figcaption>
                        </figure>

                        <figure class="image-item" data-outfit="daily" data-slide="3">
                            <img src="webp/karuma.webp" data-webp-src="webp/karuma.webp"
                                data-original-src="picture/karuma.png" alt="狩魔刀細節" data-caption="狩魔刀細節" loading="lazy">
                            <figcaption>狩魔刀細節</figcaption>
                        </figure>

                        <figure class="image-item" data-outfit="daily" data-slide="4">
                            <img src="webp/ring.webp" data-webp-src="webp/ring.webp"
                                data-original-src="picture/ring.png" alt="戒指細節" data-caption="戒指細節" loading="lazy">
                            <figcaption>戒指細節</figcaption>
                        </figure>

                        <figure class="image-item" data-outfit="daily" data-slide="5">
                            <img src="webp/genshin_artbook_cover.webp" data-webp-src="webp/genshin_artbook_cover.webp"
                                data-original-src="picture/genshin_artbook_cover.jpg" alt="會笑的玄真" data-caption="會笑的玄真"
                                loading="lazy">
                            <figcaption>會笑的玄真</figcaption>
                        </figure>

                        <figure class="image-item" data-outfit="daily" data-slide="6">
                            <img src="webp/siu_nicola_duel.webp" data-webp-src="webp/siu_nicola_duel.webp"
                                data-original-src="picture/siu_nicola_duel.png" alt="決鬥"
                                data-caption="身材參考 繪師：Siu Nicola" loading="lazy">
                            <figcaption>身材參考<br>繪師：Siu Nicola</figcaption>
                        </figure>

                        <!-- Paro -->
                        <figure class="image-item hidden" data-outfit="paro" data-slide="7">
                            <img src="webp/siu_nicola_genshin.webp" data-webp-src="webp/siu_nicola_genshin.webp"
                                data-original-src="picture/siu_nicola_genshin.png" alt="蛇妖"
                                data-caption="蛇妖 繪師：Siu Nicola" loading="lazy">
                            <figcaption>蛇妖<br>繪師：Siu Nicola</figcaption>
                        </figure>

                        <figure class="image-item hidden" data-outfit="paro" data-slide="8">
                            <img src="webp/snake.webp" data-webp-src="webp/snake.webp"
                                data-original-src="picture/snake.jpg" alt="蛇" data-caption="小蛇 繪師：Gallus"
                                loading="lazy">
                            <figcaption>小蛇<br>繪師：Gallus</figcaption>
                        </figure>

                        <figure class="image-item hidden" data-outfit="paro" data-slide="9">
                            <img src="webp/genshin_dog.webp" data-webp-src="webp/genshin_dog.webp"
                                data-original-src="picture/genshin_dog.png" alt="甲斐犬"
                                data-caption="甲斐犬 繪師：@Tsuki_shigure" loading="lazy">
                            <figcaption>甲斐犬<br>繪師：@Tsuki_shigure</figcaption>
                        </figure>

                        <figure class="image-item hidden" data-outfit="paro" data-slide="10">
                            <img src="webp/duel_genshin.webp" data-webp-src="webp/duel_genshin.webp"
                                data-original-src="picture/duel_genshin.png" alt="決鬥者" data-caption="決鬥者 繪師：淵夢"
                                loading="lazy">
                            <figcaption>決鬥者<br>繪師：淵夢</figcaption>
                        </figure>

                        <figure class="image-item hidden" data-outfit="paro" data-slide="11">
                            <img src="webp/magical_genshin.webp" data-webp-src="webp/magical_genshin.webp"
                                data-original-src="picture/magical_genshin.png" alt="魔法少女" data-caption="魔法少女 繪師：淵夢"
                                loading="lazy">
                            <div class="outfit-tag">繪製前請先詢問</div>
                            <figcaption>魔法少女<br>繪師：淵夢</figcaption>
                        </figure>

                        <figure class="image-item hidden" data-outfit="paro" data-slide="12">
                            <img src="webp/genshin_kimono.webp" data-webp-src="webp/genshin_kimono.webp"
                                data-original-src="picture/genshin_kimono.jpg" alt="placeholder" data-caption="旁邊的是他兒子"
                                loading="lazy">
                            <figcaption>好想看他們穿和服</figcaption>
                        </figure>

                        <!-- 其他 -->
                        <figure class="image-item hidden spoiler_image" data-outfit="other" data-slide="13">
                            <img src="webp/professor.webp" data-webp-src="webp/professor.webp"
                                data-original-src="picture/professor.png" alt="教授" data-caption="教授" loading="lazy">
                            <figcaption>劇透注意</figcaption>
                        </figure>

                        <figure class="image-item hidden" data-outfit="other" data-slide="14">
                            <img src="webp/cg_genbarok.webp" data-webp-src="webp/cg_genbarok.webp"
                                data-original-src="picture/cg_genbarok.png" alt="玄真與巴洛克" data-caption="玄真與巴洛克"
                                loading="lazy">
                            <figcaption>玄真與巴洛克</figcaption>
                        </figure>
                    </div>
                </section>

                <section class="character-section" data-character="klint">
                    <h3>克里姆特·班吉克斯</h3>

                    <div class="outfit-controls" data-character="klint">
                        <div class="outfit-buttons"></div>
                    </div>

                    <div class="character-description">
                        <h4>角色特徵</h4>
                        <ul>
                            <li>33歲，大英帝國的首席檢察官</li>
                            <li>身高192，身材偏壯，有明顯肌肉，身上可以自由加上傷疤</li>
                            <li>表情：平常比較認真，跟朋友相處時會笑得比較多</li>
                            <li>左胸口掛著檢察官徽章，手戴著手套</li>
                        </ul>
                    </div>

                    <div class="outfit-description-templates" hidden>
                        <div class="outfit-description" data-outfit="professor">
                            <h4>角色特徵</h4>
                            <ul>
                                <li>設定是克里姆特腦裏被具象化的自我審判</li>
                                <li>造型是克里姆特加上黑斗篷</li>
                                <li>外表比克里姆特冷淡，像是被刪去了所有感情</li>
                                <li>設定還在整理中先看<a href="https://www.plurk.com/p/3i4iecbzwb">這裏</a></li>
                            </ul>
                        </div>
                    </div>

                    <div class="character-images" id="klint-images">
                        <!-- 日常服 (預設顯示) -->
                        <figure class="image-item" data-outfit="daily" data-slide="15">
                            <img src="webp/Klint_Full_Body.webp" data-webp-src="webp/Klint_Full_Body.webp"
                                data-original-src="picture/Klint_Full_Body.png" alt="正面全身立繪" data-caption="正面全身立繪"
                                loading="lazy">
                            <figcaption>正面全身立繪</figcaption>
                        </figure>

                        <figure class="image-item" data-outfit="daily" data-slide="16">
                            <img src="webp/Klint_Artbook.webp" data-webp-src="webp/Klint_Artbook.webp"
                                data-original-src="picture/Klint_Artbook.jpg" alt="正面+大頭" data-caption="正面+大頭"
                                loading="lazy">
                            <figcaption>正面+大頭</figcaption>
                        </figure>

                        <figure class="image-item" data-outfit="daily" data-slide="17">
                            <img src="webp/klint_accessories.webp" data-webp-src="webp/klint_accessories.webp"
                                data-original-src="picture/klint_accessories.png" alt="配件細節" data-caption="配件細節"
                                loading="lazy">
                            <figcaption>配件細節</figcaption>
                        </figure>

                        <figure class="image-item" data-outfit="daily" data-slide="18">
                            <img src="webp/young_klint.webp" data-webp-src="webp/young_klint.webp"
                                data-original-src="picture/young_klint.jpg" alt="年輕克里姆特和小巴洛克" data-caption="年輕克里姆特和小巴洛克"
                                loading="lazy">
                            <figcaption>年輕克里姆特和小巴洛克</figcaption>
                        </figure>

                        <figure class="image-item" data-outfit="daily" data-slide="19">
                            <img src="webp/klint_artbook_cover.webp" data-webp-src="webp/klint_artbook_cover.webp"
                                data-original-src="picture/klint_artbook_cover.jpg" alt="後腳跟兄弟" data-caption="後腳跟兄弟"
                                loading="lazy">
                            <figcaption>後腳跟兄弟</figcaption>
                        </figure>

                        <!-- Paro -->
                        <figure class="image-item hidden" data-outfit="paro" data-slide="20">
                            <img src="webp/siu_nicola_klint.webp" data-webp-src="webp/siu_nicola_klint.webp"
                                data-original-src="picture/siu_nicola_klint.png" alt="吸血鬼"
                                data-caption="吸血鬼 繪師：Siu Nicola" loading="lazy">
                            <figcaption>吸血鬼<br>繪師：Siu Nicola</figcaption>
                        </figure>

                        <figure class="image-item hidden" data-outfit="paro" data-slide="21">
                            <img src="webp/bat.webp" data-webp-src="webp/bat.webp" data-original-src="picture/bat.jpg"
                                alt="蝙蝠" data-caption="蝙蝠 繪師：Gallus" loading="lazy">
                            <figcaption>蝙蝠<br>繪師：Gallus</figcaption>
                        </figure>

                        <figure class="image-item hidden" data-outfit="paro" data-slide="22">
                            <img src="webp/klint_dog.webp" data-webp-src="webp/klint_dog.webp"
                                data-original-src="picture/klint_dog.png" alt="靈緹" data-caption="靈緹 繪師：@Tsuki_shigure"
                                loading="lazy">
                            <figcaption>靈緹<br>繪師：@Tsuki_shigure</figcaption>
                        </figure>

                        <figure class="image-item hidden" data-outfit="paro" data-slide="23">
                            <img src="webp/duel_klint.webp" data-webp-src="webp/duel_klint.webp"
                                data-original-src="picture/duel_klint.png" alt="決鬥者" data-caption="決鬥者 繪師：淵夢"
                                loading="lazy">
                            <figcaption>決鬥者<br>繪師：淵夢</figcaption>
                        </figure>

                        <figure class="image-item hidden" data-outfit="paro" data-slide="24">
                            <img src="webp/placeholder2.webp" data-webp-src="webp/placeholder2.webp"
                                data-original-src="picture/placeholder2.jpg" alt="placeholder" data-caption="這套娃衣好難穿"
                                loading="lazy">
                            <figcaption>好想看他們穿和服</figcaption>
                        </figure>
                        <!--教授-->
                        <figure class="image-item hidden" data-outfit="professor" data-slide="25">
                            <img src="webp/professor_k.webp" data-webp-src="webp/siu_nicola_professor.webp"
                                data-original-src="picture/professor_k.png" alt="教授克" data-caption="水仙 繪師：小雪"
                                loading="lazy">
                            <figcaption>水仙<br>繪師：小雪</figcaption>
                        </figure>
                        <!-- 其他 -->
                        <figure class="image-item hidden spoiler_image" data-outfit="other" data-slide="26">
                            <img src="webp/Genshin_Impact.webp" data-webp-src="webp/Genshin_Impact.webp"
                                data-original-src="picture/Genshin_Impact.png" alt="原神衝擊" data-caption="玄克里決鬥前"
                                loading="lazy">
                            <figcaption>劇透注意</figcaption>
                        </figure>

                        <figure class="image-item hidden" data-outfit="other" data-slide="27">
                            <img src="webp/klintbarok.webp" data-webp-src="webp/klintbarok.webp"
                                data-original-src="picture/klintbarok.png" alt="克里姆特和巴洛克" data-caption="旁邊的是格雷格森"
                                loading="lazy">
                            <figcaption>克里姆特和巴洛克</figcaption>
                        </figure>


                    </div>
                </section>

                <section class="character-section" data-character="barok">
                    <h3>巴洛克．班吉克斯</h3>
                    <hr style="margin: 1rem 0 1rem; background-color:#e9ecef;border: none;height: 1px;">
                    <div class="character-description">
                        <h4>角色特徵</h4>
                        <ul>
                            <li>克里姆特的弟弟，比他哥哥小10歲</li>
                            <li>身高192，身材偏壯</li>
                            <li>是文靜且關心別人的青年</li>
                            <li>克里姆特死後額頭上才有X型疤痕，也是那時才開始成為不嘻嘻男</li>
                        </ul>
                    </div>

                    <div class="character-images" id="barok-images">
                        <!-- 日常服 (預設顯示) -->
                        <figure class="image-item" data-outfit="daily" data-slide="28">
                            <img src="webp/barok_full_body.webp" data-webp-src="webp/barok_full_body.webp"
                                data-original-src="picture/barok_full_body.png" alt="正面全身" data-caption="正面全身"
                                loading="lazy">
                            <figcaption>正面全身</figcaption>
                        </figure>

                        <figure class="image-item" data-outfit="daily" data-slide="29">
                            <img src="webp/barok_full_body_cape.webp" data-webp-src="webp/barok_full_body_cape.webp"
                                data-original-src="picture/barok_full_body_cape.png" alt="正面全身（有披風）"
                                data-caption="正面全身（有披風）" loading="lazy">
                            <figcaption>正面全身（有披風）</figcaption>
                        </figure>

                        <figure class="image-item" data-outfit="daily" data-slide="30">
                            <img src="webp/barok_back.webp" data-webp-src="webp/barok_back.webp"
                                data-original-src="picture/barok_back.png" alt="側面與背面全身" data-caption="側面與背面全身"
                                loading="lazy">
                            <figcaption>側面與背面全身</figcaption>
                        </figure>

                        <figure class="image-item" data-outfit="daily" data-slide="31">
                            <img src="webp/barok_young.webp" data-webp-src="webp/barok_young.webp"
                                data-original-src="picture/barok_young.jpg" alt="年輕巴洛克" data-caption="年輕巴洛克"
                                loading="lazy">
                            <figcaption>年輕巴洛克</figcaption>
                        </figure>

                        <figure class="image-item" data-outfit="daily" data-slide="32">
                            <img src="webp/barok_kimono.webp" data-webp-src="webp/barok_kimono.webp"
                                data-original-src="picture/barok_kimono.jpg" alt="巴洛克穿和服" data-caption="巴洛克穿和服"
                                loading="lazy">
                            <figcaption>巴洛克穿和服</figcaption>
                        </figure>

                        <figure class="image-item" data-outfit="daily" data-slide="33">
                            <img src="webp/meowzieks.webp" data-webp-src="webp/meowzieks.webp"
                                data-original-src="picture/meowzieks.png" alt="貓貓吉祥物" data-caption="貓貓吉祥物"
                                loading="lazy">
                            <figcaption>貓貓吉祥物</figcaption>
                        </figure>
                    </div>
                </section>
            </main>
        </div>
        <hr>
        <footer>
            <p>本網站由tong1743製作，內容與一切官方無關<br>想不到下面要放什麼所以放點隨機說話</p>
            <p class="random-word"></p>
        </footer>
        <!-- 返回頂部按鈕 -->
        <button id="backToTopBtn">
            <img src="picture/backtotop.gif" alt="回到頂端" />
        </button>
    </div>
    <!-- 模態視窗 -->
    <div id="imageModal" class="modal">
        <div class="zoom-info">
            ↔ 切換圖片 | ↕ /滾輪 縮放 | 拖拽 移動 | ESC 關閉
        </div>

        <!-- 下載圖片按鈕 -->

        <button class="modal-prev" onclick="plusSlides(-1)">
            <div class="modal-icon"></div>
        </button>
        <div class="zoom-controls">
            <button class="zoom-btn" id="zoomIn" title="放大">+</button>
            <button class="zoom-btn" id="zoomOut" title="縮小">−</button>
            <button class="zoom-btn" id="zoomReset" title="重置">⟲</button>
        </div>


        <div class="modal-content">
            <div class="buttons">
                <span class="close" onclick="closeModal()">&times;</span>
                <div class="download-controls">
                    <button class="download-btn" id="downloadOriginal" title="下載原始尺寸圖片" disabled>
                        <div class="download-icon"></div>
                    </button>
                </div>
            </div>
            <!-- 視窗容器 -->
            <div class="modal-viewport">
                <div id="modalImageContainer" class="modal-image-container">
                    <!-- 圖片會在這裡動態插入 -->
                    <img id="modalImage" alt="圖片預覽">
                </div>

                <!-- 載入指示器 -->
                <div class="loading-indicator" style="display: none;">
                    <div class="spinner"></div>
                    <p>載入中...</p>
                </div>
            </div>

            <button class="modal-next" onclick="plusSlides(1)">
                <div class="modal-icon"></div>
            </button>
            <div class="modal-caption" id="caption">點擊圖片查看預覽</div>

            <!-- 下載提示 -->
            <div id="downloadTooltip" class="download-tooltip"></div>
        </div>

        <script src="common/common_js.js"></script>
        <script src="non_common/chara_pic.js" defer></script>
        <script>
            // 小型輔助：為側邊導覽的 submenu-toggle 加上點擊行為
            document.addEventListener('DOMContentLoaded', function () {
                // 只在 caret（小箭頭）上綁定展開/收合行為，點擊主連結將保留導覽功能
                // helper: 精確控制 submenu 的 max-height 過渡
                function setSubmenuOpen(group, open) {
                    const submenu = group.querySelector('.submenu');
                    const caret = group.querySelector('.caret');
                    if (!submenu) return;

                    if (open) {
                        group.classList.add('open');
                        submenu.setAttribute('aria-hidden', 'false');
                        if (caret) caret.classList.add('open');

                        // 設定為當前 scrollHeight 以觸發 max-height 過渡
                        submenu.style.maxHeight = submenu.scrollHeight + 'px';
                        submenu.style.opacity = '1';
                        submenu.style.transform = 'translateY(0)';

                        // 過渡結束後移除 max-height 限制，允許內容高度自適應
                        const onEnd = function (e) {
                            if (e.propertyName === 'max-height') {
                                submenu.style.maxHeight = 'none';
                                submenu.removeEventListener('transitionend', onEnd);
                            }
                        };
                        submenu.addEventListener('transitionend', onEnd);
                    } else {
                        // 若先前已設為 none，需要先設為實際高度以便做過渡
                        if (getComputedStyle(submenu).maxHeight === 'none') {
                            submenu.style.maxHeight = submenu.scrollHeight + 'px';
                        }
                        // force reflow
                        submenu.getBoundingClientRect();

                        group.classList.remove('open');
                        submenu.setAttribute('aria-hidden', 'true');
                        if (caret) caret.classList.remove('open');

                        // 觸發折疊過渡
                        submenu.style.maxHeight = '0px';
                        submenu.style.opacity = '0';
                        submenu.style.transform = 'translateY(-6px)';
                    }
                }

                document.querySelectorAll('.submenu-header .caret').forEach(function (caret) {
                    caret.addEventListener('click', function (e) {
                        e.preventDefault();
                        e.stopPropagation();
                        const group = this.closest('.submenu-group');
                        if (!group) return;
                        const willOpen = !group.classList.contains('open');
                        setSubmenuOpen(group, willOpen);
                    });
                    // 支援鍵盤啟動（Enter / Space）
                    caret.addEventListener('keydown', function (e) {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            this.click();
                        }
                    });
                });

                // 如果 URL 有 hash（例如 #genshin），自動展開包含該錨點的子選單
                const hash = (location.hash || '').replace('#', '');
                if (hash) {
                    const target = document.querySelector('.side-nav .submenu a[href$="#' + hash + '"]');
                    if (target) {
                        const group = target.closest('.submenu-group');
                        if (group) {
                            // 使用精確展開函式，確保動畫與 inline max-height 設定正確
                            setSubmenuOpen(group, true);
                        }
                    }
                }
            });
        </script>
</body>

</html>